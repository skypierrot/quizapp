const { drizzle } = require("drizzle-orm/postgres-js"); const { migrate } = require("drizzle-orm/postgres-js/migrator"); const postgres = require("postgres"); async function runMigrate() { const connectionString = "postgres://postgres:postgres@quizapp-db-dev:5432/quizapp"; console.log("Starting database migration..."); const sql = postgres(connectionString, { max: 1 }); const db = drizzle(sql); try { await migrate(db, { migrationsFolder: "./drizzle" }); console.log("Database migration completed successfully."); } catch (error) { console.error("Error during database migration:", error); process.exit(1); } finally { await sql.end(); console.log("Database connection closed."); } } runMigrate();